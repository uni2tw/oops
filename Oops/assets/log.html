<!DOCTYPE html
          PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta name="viewport" content="width=device-width initial-scale=1.0" />
    <meta charset="utf-8">
    <title>
        日誌中心
    </title>
    
    <link rel="stylesheet" type="text/css" href="site.css?v=3">

    <script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.1.3/vue-router.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/oops.axd/rss" />
</head>

<body>
    <div id="app">
        <h1 id="PageTitle">
            {{pageTitle}}            
        </h1>
        <ul id="SpeedList">
            <li v-if="mode==1"><a href="javascript:void(0)" v-on:click="listPage()" title="List of logged errors">ERRORS</a></li>
            <li><a href="javascript:void(0)" v-on:click="queryBySql()" title="Query by sql script">Sql</a></li>
            <li><a href="javascript:void(0)" v-on:click="helpPage()" title="Documentation, discussions, issues and more">Help</a></li>
            <li><a href="javascript:void(0)" v-on:click="aboutPage()" title="Information about this version and build">About</a></li>
        </ul>
        <div v-show="mode==0" class="oops-list" style="position:relative">
            <div style="display:flex; justify-content:space-between; margin:1em 0em">
                <div>
                    Errors {{startRow}} to {{endRow}} of total {{totalRows}} (page {{page}} of {{totalPages}}). Start with
                    <a href="javascript:void(0)" v-on:click="listPage(20)" rel="start">20</a>,
                    <a href="javascript:void(0)" v-on:click="listPage(50)" rel="start">50</a>,
                    <a href="javascript:void(0)" v-on:click="listPage(100)" rel="start">100</a> or
                    <a href="javascript:void(0)" v-on:click="listPage(200)" rel="start">200</a> errors per page.
                </div>
                <div>
                    <!--<select>
            <option value="1">today</option>
            <option value="7">week</option>
            <option value="30">month</option>
            <option value="">all</option>
        </select>-->
                    reload: <select v-model="reloadMode" v-on:change="onReloadModeChange($event)">
                        <option value="0">no</option>
                        <option value="10">10 secs</option>
                        <option value="60">1 minute</option>
                        <option value="3600">1 hour</option>
                    </select>
                </div>
            </div>
            <table id="ErrorLog" cellspacing="0" style="border-collapse:collapse;">
                <tr>
                    <th class="app-col">App</th>
                    <th class="host-col">Host</th>
                    <th class="code-col">Code</th>
                    <th class="type-col">Type</th>
                    <th class="url-col">Url</th>
                    <th class="error-col error-hd"><span>Error</span><select style="display:none"></select></th>
                    <th class="user-col">User</th>
                    <th class="date-col">Date</th>
                    <th class="time-col">Time</th>
                </tr>
                <tr v-for="(log, idx) in logs" :class="{'even-row': idx % 2 == 0, 'odd-row': idx % 2 == 1 }">
                    <td class="app-col">{{log.app}}</td>
                    <td class="host-col">{{log.host}}</td>
                    <td class="code-col"><span title="Bad Request">{{log.code}}</span></td>
                    <td class="type-col">
                        <span title="System.Web.HttpException">{{log.type}}</span>
                    </td>
                    <td class="url-col">{{log.url}}</td>
                    <td class="error-col">{{log.error}}<a href="javascript:void(0)" v-on:click="detailPage(log.id)" style="margin-left:8px">Details...</a></td>
                    <td class="user-col">{{log.user}}</td>
                    <td class="date-col">{{log.date}}</td>
                    <td class="time-col">{{log.time}}</td>
                </tr>
            </table>
            <p>
                <span v-if="page==1">
                    <a href="javascript:void(0)" v-on:click="nextPage()" rel="next">Next errors</a>
                </span>
                <span v-else-if="page==totalPages">
                    <a href="javascript:void(0)" v-on:click="firstPage()" rel="start">Back to first page</a>
                </span>
                <span v-else>
                    <a href="javascript:void(0)" v-on:click="nextPage()" rel="next">Next errors</a>
                    ; 
                   <a href="javascript:void(0)" v-on:click="firstPage()" rel="start">Back to first page</a>
               </span>
            </p>
            <p id="Footer">
                <span>
                    Powered by <a href="http://www.17life.com/" target="_blank">17Life-Customized</a>, version 0.0.1
                    Copyright (c) 2020, Unicorn Liu. All rights reserved. Licensed under <a href="https://www.tldrlegal.com/l/mit">MIT License</a>.
                </span>This log is provided by the Sqlite Error Log.
            </p>
        </div>        
    </div>

    <script type="text/javascript">

        var router = new VueRouter({
            mode: 'history'
        });
       
    </script>
</body>

</html>